# 更新日志

## 2024-11-05

### 🐛 问题修复

- **日志**: 修复多进程日志无法显示的问题
   - 添加 `multiprocessing.log_to_stderr()` 支持
   - 确保子进程中的日志能正常输出
- **日志**: 修复 `_log_service_names` 方法中未解析的 'self' 引用
- **日志**: 修复重复的日志配置问题

### ✨ 新增功能

- **配置**: 新增 `MAX_WORKERS` 环境变量配置，用于控制 workers 数量
- **项目配置**: 重构项目配置方式
   - 使用 `PROJECT__<项目标识>__SERVICE_NAME` 和 `PROJECT__<项目标识>__API_KEY` 格式
   - 移除了原有的 `ONE_HUB_API_KEY`、`UPTIME_KUMA_API_KEY`、`NAV_API_KEY` 等固定配置
- **通知**: 添加部署状态图标
   - ✅ 成功状态（live）
   - ❌ 失败状态（failed/cancelled）

### 📝 文档改进

- **环境变量**: 重组环境变量说明，分为基础配置和项目配置两部分
- **配置说明**: 添加项目配置的详细说明和示例
- **注意事项**: 补充环境变量命名规范和示例
   - 添加正确和错误的配置示例
   - 详细说明项目标识的格式要求

### 🔨 代码重构

- **日志**: 统一使用 `docker-hooks` logger 替代模块级 logger
- **方法**: 移除不必要的 `@staticmethod` 装饰器
- **方法**: 统一使用 `self.logger` 进行日志记录
- **类型**: 完善类型注解
- **配置管理**: 重构项目配置的加载方式
- **环境变量**: 统一环境变量命名规范
- **项目结构**: 优化配置文件组织
